.table-responsive
  %table.table.table-condensed.table-hover
    %thead
      - if client_identified?
        %th Last Name
        %th First Name
      - else
        %th Client Identifier
      %th Agency
      %th Assessment Score
      %th Assessment Date
      %th Status
      - if current_user.can_view_some_clients?
        %th CAS Client

    %tbody
      - @non_hmis_clients.each do |non_hmis_client|
        - current_assessment = non_hmis_client.current_assessment
        - path = client_identified? ? identified_client_path(non_hmis_client) : deidentified_client_path(non_hmis_client)
        %tr{data: {href: path}}
          - if client_identified?
            %td= non_hmis_client.last_name
            %td= non_hmis_client.first_name
          - else
            %td= non_hmis_client.client_identifier

          %td= non_hmis_client.agency&.name

          %td= current_assessment&.assessment_score

          %td= current_assessment&.created_at

          %td
            -#  Status

          - if current_user.can_view_some_clients?
            %td
              - if non_hmis_client.client
                = link_to client_path(non_hmis_client.client), class: 'btn btn-secondary btn-sm d-inline-flex align-items-center'  do
                  View CAS Client
                  %span.icon-arrow-right2.ml-2

%p= paginate @non_hmis_clients

- content_for :page_js do
  :javascript
    $('[data-href]').on('click', function() {
      window.location = $(this).data('href')
    })
