= content_for :modal_title do
  Add Attribute

= simple_form_for @attribute, url:  unit_unit_attributes_path(@unit) do |f|
  = f.input :name, collection: @attribute.existing_attributes, input_html: { class: 'select2 jType', data: { tags: true }}, include_blank: true, hint: 'If you don\'t see the type required, type it in and select it'
  = f.input :value, collection: [], input_html: { class: :select2, data: { tags: true, 'collection-path' => values_unit_unit_attributes_path(@unit) } }, include_blank: true, hint: 'If you don\'t see the value required, type it in and select it'

  =f.button :submit

= content_for :page_js do
  :javascript
    $('.select2').select2();

    $(document).ready(function() {
      $('.jType').on('change', function(e) {
        var attribute_name = $(this).val();
        var input = $('#unit_attribute_value');
        [path, query] = input.data('collection-path').split('?');
        input.data('collection-path', path + "?attribute_name=" + attribute_name);
        App.remoteSelectLoad.init();
      });
    });